/*
 * generated by Xtext 2.37.0
 */
package fr.enseeiht.ocl.xtext.validation;

import fr.enseeiht.ocl.xtext.types.OclInvalid;

import java.util.List;

import org.eclipse.emf.ecore.EObject;

import fr.enseeiht.ocl.xtext.ocl.Module;

/**
 * This class contains custom validation rules. 
 *
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
public class OclValidator extends AbstractOclValidator {
	
	public void checkType(Module module) {
		OclInvalid invalid = OclTypeChecker.getAllTypes(module);
		for (TypeCheckingError error : invalid.origins) {
			EObject target = error.getCause();
			EObject container = target.eContainer();
            if(container.eGet(target.eContainingFeature()) instanceof List){
                @SuppressWarnings("unchecked")
                List<EObject> features = (List<EObject>) container.eGet(target.eContainingFeature());
                error(error.getMessage(), container, target.eContainingFeature(), features.indexOf(target), "org.eclipse.xtext.diagnostics.Diagnostic.CheckType", new String[0]);
            } else {
                error(error.getMessage(), container, target.eContainingFeature(), "org.eclipse.xtext.diagnostics.Diagnostic.CheckType", new String[0]);
            }
		}
	}
//	public static final String INVALID_NAME = "invalidName";
//
//	@Check
//	public void checkGreetingStartsWithCapital(Greeting greeting) {
//		if (!Character.isUpperCase(greeting.getName().charAt(0))) {
//			warning("Name should start with a capital",
//					OclPackage.Literals.GREETING__NAME,
//					INVALID_NAME);
//		}
//	}
	
}
